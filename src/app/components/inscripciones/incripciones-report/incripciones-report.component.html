<div class="row">
    <div class="col-8">
        <h1>Reporte de inscripciones</h1>
    </div>
    <div class="col-2 mt-3">
        <p-dropdown [options]="ciclosescolares"
        optionLabel="name"
        name="cicloescolarSelected"
        (onChange)="onChangeCicloEscolar($event)"
        [(ngModel)] ="cicloescolarSelected"></p-dropdown>
        <!-- [disabled]="!editMode" -->
    </div>
    <div class="col-2 mt-3">
        <p-dropdown [options]="niveles"
        optionLabel="name"
        name="nivelSelected"
        (onChange)="onChangeNivel($event)"
        [(ngModel)] ="nivelSelected"></p-dropdown>
        <!-- [disabled]="!editMode" -->
    </div>
</div>



<hr>
<!-- barChartData : <pre>{{ barChartData | json}}</pre> -->
<!-- barChartData : <pre>{{ barChartData | json}}</pre> -->
<div class="row">
    <div class="col-8">
        <canvas baseChart
            [datasets]="barChartData"
            [labels]="barChartLabels"
            [options]="barChartOptions"
            [legend]="barChartLegend"
            [chartType]="barChartType">
        </canvas>
    </div>
    <div class="col-4">
        <div class="row">
            <div class="col title text-center mb-2">Resumen de inscripciones</div>
        </div>
        <hr>
        <div class="row" *ngFor="let grado of barChartLabels; let i = index;" >
            <div class="col"></div>
            <div class="col-6">{{ grado }}</div>
            <div class="col-4 text-end">{{ dataG[i] }}</div>
            <div class="col"></div>
        </div>
        <hr>
        <div class="row">
            <div class="col"></div>
            <div class="col-6 text-end">Total:</div>
            <div class="col-4 text-end">{{ sum(dataG) }}</div>
            <div class="col"></div>

        </div>
    </div>
</div>

<p-table #dt [columns]="cols" [value]="inscripcionesreport" selectionMode="multiple" [(selection)]="inscripcionesSelected"  name="reporttable" id="reporttable">
    <ng-template pTemplate="caption">
        <div class="p-d-flex text-end">
            <button type="button" pButton pRipple icon="pi pi-file-o" (click)="dt.exportCSV()" class="p-mr-2" pTooltip="Exportar a CSV" tooltipPosition="top"></button> &nbsp;
            <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()" class="p-button-success p-mr-2"  pTooltip="Exportar a Excel" tooltipPosition="top"></button> &nbsp;
            <button type="button" pButton pRipple icon="pi pi-file-pdf" (click)="exportPdf()" class="p-button-warning p-mr-2" pTooltip="Exportar a PDF" tooltipPosition="top"></button>
            <!-- <button type="button" pButton pRipple icon="pi pi-filter" (click)="dt.exportCSV({selectionOnly:true})" class="p-button-info p-ml-auto" pTooltip="Selection Only" tooltipPosition="bottom"></button> -->
        </div>
    </ng-template>
    <ng-template pTemplate="header" let-columns>
        <tr>
            <th *ngFor="let col of columns">
                {{col.header}}
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr [pSelectableRow]="rowData">
            <td *ngFor="let col of columns">
                {{rowData[col.field]}}
            </td>
        </tr>
    </ng-template>
</p-table>
<hr>
<!-- inscripcionesreport: <pre>{{ inscripcionesreport | json}}</pre>
Inscripciones: <pre>{{ inscripciones | json}}</pre> -->


